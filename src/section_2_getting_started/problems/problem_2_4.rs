pub fn inversions<T: Clone + Ord>(a: &[T]) -> usize {
    pub fn merge<T: Clone + Ord>(left: &[T], right: &[T]) -> (Vec<T>, usize) {
        let mut sorted = Vec::with_capacity(left.len() + right.len());
        let mut n = 0;

        let mut i = 0;
        let mut j = 0;

        loop {
            if left[i] <= right[j] {
                sorted.push(left[i].clone());

                // There are `j` elements in array `right` that are less than `left[i]`.
                n += j;

                i += 1;

                if i == left.len() {
                    sorted.extend_from_slice(&right[j..]);

                    break;
                }
            } else {
                sorted.push(right[j].clone());

                j += 1;

                if j == right.len() {
                    sorted.extend_from_slice(&left[i..]);

                    // For each element k in `left[i..]`, there are `j` elements that are less than k.
                    n += j * (left.len() - i);

                    break;
                }
            }
        }

        (sorted, n)
    }

    pub fn merge_sort<T: Clone + Ord>(a: &[T]) -> (Vec<T>, usize) {
        if a.len() > 1 {
            let (left, right) = a.split_at(a.len() / 2);
            let (left_sorted, inversions_left) = merge_sort(left);
            let (right_sorted, inversions_right) = merge_sort(right);
            let (sorted, inversions_between) = merge(&left_sorted, &right_sorted);

            (sorted, inversions_left + inversions_right + inversions_between)
        } else {
            (a.to_vec(), 0)
        }
    }

    merge_sort(a).1
}

#[cfg(test)]
mod tests {
    use super::inversions;

    #[test]
    fn test_inversions() {
        assert_eq!(inversions(&[0; 0]), 0);

        assert_eq!(inversions(&[0]), 0);

        assert_eq!(inversions(&[0, 0]), 0);
        assert_eq!(inversions(&[0, 1]), 0);
        assert_eq!(inversions(&[1, 0]), 1);

        assert_eq!(inversions(&[0, 0, 0]), 0);
        assert_eq!(inversions(&[0, 0, 1]), 0);
        assert_eq!(inversions(&[0, 1, 0]), 1);
        assert_eq!(inversions(&[0, 1, 1]), 0);
        assert_eq!(inversions(&[0, 1, 2]), 0);
        assert_eq!(inversions(&[0, 2, 1]), 1);
        assert_eq!(inversions(&[1, 0, 0]), 2);
        assert_eq!(inversions(&[1, 0, 1]), 1);
        assert_eq!(inversions(&[1, 0, 2]), 1);
        assert_eq!(inversions(&[1, 1, 0]), 2);
        assert_eq!(inversions(&[1, 2, 0]), 2);
        assert_eq!(inversions(&[2, 0, 1]), 2);
        assert_eq!(inversions(&[2, 1, 0]), 3);

        assert_eq!(inversions(&[0, 0, 0, 0]), 0);
        assert_eq!(inversions(&[0, 0, 0, 1]), 0);
        assert_eq!(inversions(&[0, 0, 1, 0]), 1);
        assert_eq!(inversions(&[0, 0, 1, 1]), 0);
        assert_eq!(inversions(&[0, 0, 1, 2]), 0);
        assert_eq!(inversions(&[0, 0, 2, 1]), 1);
        assert_eq!(inversions(&[0, 1, 0, 0]), 2);
        assert_eq!(inversions(&[0, 1, 0, 1]), 1);
        assert_eq!(inversions(&[0, 1, 0, 2]), 1);
        assert_eq!(inversions(&[0, 1, 1, 0]), 2);
        assert_eq!(inversions(&[0, 1, 1, 1]), 0);
        assert_eq!(inversions(&[0, 1, 1, 2]), 0);
        assert_eq!(inversions(&[0, 1, 2, 0]), 2);
        assert_eq!(inversions(&[0, 1, 2, 1]), 1);
        assert_eq!(inversions(&[0, 1, 2, 2]), 0);
        assert_eq!(inversions(&[0, 1, 2, 3]), 0);
        assert_eq!(inversions(&[0, 1, 3, 2]), 1);
        assert_eq!(inversions(&[0, 2, 0, 1]), 2);
        assert_eq!(inversions(&[0, 2, 1, 0]), 3);
        assert_eq!(inversions(&[0, 2, 1, 1]), 2);
        assert_eq!(inversions(&[0, 2, 1, 2]), 1);
        assert_eq!(inversions(&[0, 2, 1, 3]), 1);
        assert_eq!(inversions(&[0, 2, 2, 1]), 2);
        assert_eq!(inversions(&[0, 2, 3, 1]), 2);
        assert_eq!(inversions(&[0, 3, 1, 2]), 2);
        assert_eq!(inversions(&[0, 3, 2, 1]), 3);
        assert_eq!(inversions(&[1, 0, 0, 0]), 3);
        assert_eq!(inversions(&[1, 0, 0, 1]), 2);
        assert_eq!(inversions(&[1, 0, 0, 2]), 2);
        assert_eq!(inversions(&[1, 0, 1, 0]), 3);
        assert_eq!(inversions(&[1, 0, 1, 1]), 1);
        assert_eq!(inversions(&[1, 0, 1, 2]), 1);
        assert_eq!(inversions(&[1, 0, 2, 0]), 3);
        assert_eq!(inversions(&[1, 0, 2, 1]), 2);
        assert_eq!(inversions(&[1, 0, 2, 2]), 1);
        assert_eq!(inversions(&[1, 0, 2, 3]), 1);
        assert_eq!(inversions(&[1, 0, 3, 2]), 2);
        assert_eq!(inversions(&[1, 1, 0, 0]), 4);
        assert_eq!(inversions(&[1, 1, 0, 1]), 2);
        assert_eq!(inversions(&[1, 1, 0, 2]), 2);
        assert_eq!(inversions(&[1, 1, 1, 0]), 3);
        assert_eq!(inversions(&[1, 1, 2, 0]), 3);
        assert_eq!(inversions(&[1, 2, 0, 0]), 4);
        assert_eq!(inversions(&[1, 2, 0, 1]), 3);
        assert_eq!(inversions(&[1, 2, 0, 2]), 2);
        assert_eq!(inversions(&[1, 2, 0, 3]), 2);
        assert_eq!(inversions(&[1, 2, 1, 0]), 4);
        assert_eq!(inversions(&[1, 2, 2, 0]), 3);
        assert_eq!(inversions(&[1, 2, 3, 0]), 3);
        assert_eq!(inversions(&[1, 3, 0, 2]), 3);
        assert_eq!(inversions(&[1, 3, 2, 0]), 4);
        assert_eq!(inversions(&[2, 0, 0, 1]), 3);
        assert_eq!(inversions(&[2, 0, 1, 0]), 4);
        assert_eq!(inversions(&[2, 0, 1, 1]), 3);
        assert_eq!(inversions(&[2, 0, 1, 2]), 2);
        assert_eq!(inversions(&[2, 0, 1, 3]), 2);
        assert_eq!(inversions(&[2, 0, 2, 1]), 3);
        assert_eq!(inversions(&[2, 0, 3, 1]), 3);
        assert_eq!(inversions(&[2, 1, 0, 0]), 5);
        assert_eq!(inversions(&[2, 1, 0, 1]), 4);
        assert_eq!(inversions(&[2, 1, 0, 2]), 3);
        assert_eq!(inversions(&[2, 1, 0, 3]), 3);
        assert_eq!(inversions(&[2, 1, 1, 0]), 5);
        assert_eq!(inversions(&[2, 1, 2, 0]), 4);
        assert_eq!(inversions(&[2, 1, 3, 0]), 4);
        assert_eq!(inversions(&[2, 2, 0, 1]), 4);
        assert_eq!(inversions(&[2, 2, 1, 0]), 5);
        assert_eq!(inversions(&[2, 3, 0, 1]), 4);
        assert_eq!(inversions(&[2, 3, 1, 0]), 5);
        assert_eq!(inversions(&[3, 0, 1, 2]), 3);
        assert_eq!(inversions(&[3, 0, 2, 1]), 4);
        assert_eq!(inversions(&[3, 1, 0, 2]), 4);
        assert_eq!(inversions(&[3, 1, 2, 0]), 5);
        assert_eq!(inversions(&[3, 2, 0, 1]), 5);
        assert_eq!(inversions(&[3, 2, 1, 0]), 6);

        assert_eq!(inversions(&[0, 0, 0, 0, 0]), 0);
        assert_eq!(inversions(&[0, 0, 0, 0, 1]), 0);
        assert_eq!(inversions(&[0, 0, 0, 1, 0]), 1);
        assert_eq!(inversions(&[0, 0, 0, 1, 1]), 0);
        assert_eq!(inversions(&[0, 0, 0, 1, 2]), 0);
        assert_eq!(inversions(&[0, 0, 0, 2, 1]), 1);
        assert_eq!(inversions(&[0, 0, 1, 0, 0]), 2);
        assert_eq!(inversions(&[0, 0, 1, 0, 1]), 1);
        assert_eq!(inversions(&[0, 0, 1, 0, 2]), 1);
        assert_eq!(inversions(&[0, 0, 1, 1, 0]), 2);
        assert_eq!(inversions(&[0, 0, 1, 1, 1]), 0);
        assert_eq!(inversions(&[0, 0, 1, 1, 2]), 0);
        assert_eq!(inversions(&[0, 0, 1, 2, 0]), 2);
        assert_eq!(inversions(&[0, 0, 1, 2, 1]), 1);
        assert_eq!(inversions(&[0, 0, 1, 2, 2]), 0);
        assert_eq!(inversions(&[0, 0, 1, 2, 3]), 0);
        assert_eq!(inversions(&[0, 0, 1, 3, 2]), 1);
        assert_eq!(inversions(&[0, 0, 2, 0, 1]), 2);
        assert_eq!(inversions(&[0, 0, 2, 1, 0]), 3);
        assert_eq!(inversions(&[0, 0, 2, 1, 1]), 2);
        assert_eq!(inversions(&[0, 0, 2, 1, 2]), 1);
        assert_eq!(inversions(&[0, 0, 2, 1, 3]), 1);
        assert_eq!(inversions(&[0, 0, 2, 2, 1]), 2);
        assert_eq!(inversions(&[0, 0, 2, 3, 1]), 2);
        assert_eq!(inversions(&[0, 0, 3, 1, 2]), 2);
        assert_eq!(inversions(&[0, 0, 3, 2, 1]), 3);
        assert_eq!(inversions(&[0, 1, 0, 0, 0]), 3);
        assert_eq!(inversions(&[0, 1, 0, 0, 1]), 2);
        assert_eq!(inversions(&[0, 1, 0, 0, 2]), 2);
        assert_eq!(inversions(&[0, 1, 0, 1, 0]), 3);
        assert_eq!(inversions(&[0, 1, 0, 1, 1]), 1);
        assert_eq!(inversions(&[0, 1, 0, 1, 2]), 1);
        assert_eq!(inversions(&[0, 1, 0, 2, 0]), 3);
        assert_eq!(inversions(&[0, 1, 0, 2, 1]), 2);
        assert_eq!(inversions(&[0, 1, 0, 2, 2]), 1);
        assert_eq!(inversions(&[0, 1, 0, 2, 3]), 1);
        assert_eq!(inversions(&[0, 1, 0, 3, 2]), 2);
        assert_eq!(inversions(&[0, 1, 1, 0, 0]), 4);
        assert_eq!(inversions(&[0, 1, 1, 0, 1]), 2);
        assert_eq!(inversions(&[0, 1, 1, 0, 2]), 2);
        assert_eq!(inversions(&[0, 1, 1, 1, 0]), 3);
        assert_eq!(inversions(&[0, 1, 1, 1, 1]), 0);
        assert_eq!(inversions(&[0, 1, 1, 1, 2]), 0);
        assert_eq!(inversions(&[0, 1, 1, 2, 0]), 3);
        assert_eq!(inversions(&[0, 1, 1, 2, 1]), 1);
        assert_eq!(inversions(&[0, 1, 1, 2, 2]), 0);
        assert_eq!(inversions(&[0, 1, 1, 2, 3]), 0);
        assert_eq!(inversions(&[0, 1, 1, 3, 2]), 1);
        assert_eq!(inversions(&[0, 1, 2, 0, 0]), 4);
        assert_eq!(inversions(&[0, 1, 2, 0, 1]), 3);
        assert_eq!(inversions(&[0, 1, 2, 0, 2]), 2);
        assert_eq!(inversions(&[0, 1, 2, 0, 3]), 2);
        assert_eq!(inversions(&[0, 1, 2, 1, 0]), 4);
        assert_eq!(inversions(&[0, 1, 2, 1, 1]), 2);
        assert_eq!(inversions(&[0, 1, 2, 1, 2]), 1);
        assert_eq!(inversions(&[0, 1, 2, 1, 3]), 1);
        assert_eq!(inversions(&[0, 1, 2, 2, 0]), 3);
        assert_eq!(inversions(&[0, 1, 2, 2, 1]), 2);
        assert_eq!(inversions(&[0, 1, 2, 2, 2]), 0);
        assert_eq!(inversions(&[0, 1, 2, 2, 3]), 0);
        assert_eq!(inversions(&[0, 1, 2, 3, 0]), 3);
        assert_eq!(inversions(&[0, 1, 2, 3, 1]), 2);
        assert_eq!(inversions(&[0, 1, 2, 3, 2]), 1);
        assert_eq!(inversions(&[0, 1, 2, 3, 3]), 0);
        assert_eq!(inversions(&[0, 1, 2, 3, 4]), 0);
        assert_eq!(inversions(&[0, 1, 2, 4, 3]), 1);
        assert_eq!(inversions(&[0, 1, 3, 0, 2]), 3);
        assert_eq!(inversions(&[0, 1, 3, 1, 2]), 2);
        assert_eq!(inversions(&[0, 1, 3, 2, 0]), 4);
        assert_eq!(inversions(&[0, 1, 3, 2, 1]), 3);
        assert_eq!(inversions(&[0, 1, 3, 2, 2]), 2);
        assert_eq!(inversions(&[0, 1, 3, 2, 3]), 1);
        assert_eq!(inversions(&[0, 1, 3, 2, 4]), 1);
        assert_eq!(inversions(&[0, 1, 3, 3, 2]), 2);
        assert_eq!(inversions(&[0, 1, 3, 4, 2]), 2);
        assert_eq!(inversions(&[0, 1, 4, 2, 3]), 2);
        assert_eq!(inversions(&[0, 1, 4, 3, 2]), 3);
        assert_eq!(inversions(&[0, 2, 0, 0, 1]), 3);
        assert_eq!(inversions(&[0, 2, 0, 1, 0]), 4);
        assert_eq!(inversions(&[0, 2, 0, 1, 1]), 3);
        assert_eq!(inversions(&[0, 2, 0, 1, 2]), 2);
        assert_eq!(inversions(&[0, 2, 0, 1, 3]), 2);
        assert_eq!(inversions(&[0, 2, 0, 2, 1]), 3);
        assert_eq!(inversions(&[0, 2, 0, 3, 1]), 3);
        assert_eq!(inversions(&[0, 2, 1, 0, 0]), 5);
        assert_eq!(inversions(&[0, 2, 1, 0, 1]), 4);
        assert_eq!(inversions(&[0, 2, 1, 0, 2]), 3);
        assert_eq!(inversions(&[0, 2, 1, 0, 3]), 3);
        assert_eq!(inversions(&[0, 2, 1, 1, 0]), 5);
        assert_eq!(inversions(&[0, 2, 1, 1, 1]), 3);
        assert_eq!(inversions(&[0, 2, 1, 1, 2]), 2);
        assert_eq!(inversions(&[0, 2, 1, 1, 3]), 2);
        assert_eq!(inversions(&[0, 2, 1, 2, 0]), 4);
        assert_eq!(inversions(&[0, 2, 1, 2, 1]), 3);
        assert_eq!(inversions(&[0, 2, 1, 2, 2]), 1);
        assert_eq!(inversions(&[0, 2, 1, 2, 3]), 1);
        assert_eq!(inversions(&[0, 2, 1, 3, 0]), 4);
        assert_eq!(inversions(&[0, 2, 1, 3, 1]), 3);
        assert_eq!(inversions(&[0, 2, 1, 3, 2]), 2);
        assert_eq!(inversions(&[0, 2, 1, 3, 3]), 1);
        assert_eq!(inversions(&[0, 2, 1, 3, 4]), 1);
        assert_eq!(inversions(&[0, 2, 1, 4, 3]), 2);
        assert_eq!(inversions(&[0, 2, 2, 0, 1]), 4);
        assert_eq!(inversions(&[0, 2, 2, 1, 0]), 5);
        assert_eq!(inversions(&[0, 2, 2, 1, 1]), 4);
        assert_eq!(inversions(&[0, 2, 2, 1, 2]), 2);
        assert_eq!(inversions(&[0, 2, 2, 1, 3]), 2);
        assert_eq!(inversions(&[0, 2, 2, 2, 1]), 3);
        assert_eq!(inversions(&[0, 2, 2, 3, 1]), 3);
        assert_eq!(inversions(&[0, 2, 3, 0, 1]), 4);
        assert_eq!(inversions(&[0, 2, 3, 1, 0]), 5);
        assert_eq!(inversions(&[0, 2, 3, 1, 1]), 4);
        assert_eq!(inversions(&[0, 2, 3, 1, 2]), 3);
        assert_eq!(inversions(&[0, 2, 3, 1, 3]), 2);
        assert_eq!(inversions(&[0, 2, 3, 1, 4]), 2);
        assert_eq!(inversions(&[0, 2, 3, 2, 1]), 4);
        assert_eq!(inversions(&[0, 2, 3, 3, 1]), 3);
        assert_eq!(inversions(&[0, 2, 3, 4, 1]), 3);
        assert_eq!(inversions(&[0, 2, 4, 1, 3]), 3);
        assert_eq!(inversions(&[0, 2, 4, 3, 1]), 4);
        assert_eq!(inversions(&[0, 3, 0, 1, 2]), 3);
        assert_eq!(inversions(&[0, 3, 0, 2, 1]), 4);
        assert_eq!(inversions(&[0, 3, 1, 0, 2]), 4);
        assert_eq!(inversions(&[0, 3, 1, 1, 2]), 3);
        assert_eq!(inversions(&[0, 3, 1, 2, 0]), 5);
        assert_eq!(inversions(&[0, 3, 1, 2, 1]), 4);
        assert_eq!(inversions(&[0, 3, 1, 2, 2]), 3);
        assert_eq!(inversions(&[0, 3, 1, 2, 3]), 2);
        assert_eq!(inversions(&[0, 3, 1, 2, 4]), 2);
        assert_eq!(inversions(&[0, 3, 1, 3, 2]), 3);
        assert_eq!(inversions(&[0, 3, 1, 4, 2]), 3);
        assert_eq!(inversions(&[0, 3, 2, 0, 1]), 5);
        assert_eq!(inversions(&[0, 3, 2, 1, 0]), 6);
        assert_eq!(inversions(&[0, 3, 2, 1, 1]), 5);
        assert_eq!(inversions(&[0, 3, 2, 1, 2]), 4);
        assert_eq!(inversions(&[0, 3, 2, 1, 3]), 3);
        assert_eq!(inversions(&[0, 3, 2, 1, 4]), 3);
        assert_eq!(inversions(&[0, 3, 2, 2, 1]), 5);
        assert_eq!(inversions(&[0, 3, 2, 3, 1]), 4);
        assert_eq!(inversions(&[0, 3, 2, 4, 1]), 4);
        assert_eq!(inversions(&[0, 3, 3, 1, 2]), 4);
        assert_eq!(inversions(&[0, 3, 3, 2, 1]), 5);
        assert_eq!(inversions(&[0, 3, 4, 1, 2]), 4);
        assert_eq!(inversions(&[0, 3, 4, 2, 1]), 5);
        assert_eq!(inversions(&[0, 4, 1, 2, 3]), 3);
        assert_eq!(inversions(&[0, 4, 1, 3, 2]), 4);
        assert_eq!(inversions(&[0, 4, 2, 1, 3]), 4);
        assert_eq!(inversions(&[0, 4, 2, 3, 1]), 5);
        assert_eq!(inversions(&[0, 4, 3, 1, 2]), 5);
        assert_eq!(inversions(&[0, 4, 3, 2, 1]), 6);
        assert_eq!(inversions(&[1, 0, 0, 0, 0]), 4);
        assert_eq!(inversions(&[1, 0, 0, 0, 1]), 3);
        assert_eq!(inversions(&[1, 0, 0, 0, 2]), 3);
        assert_eq!(inversions(&[1, 0, 0, 1, 0]), 4);
        assert_eq!(inversions(&[1, 0, 0, 1, 1]), 2);
        assert_eq!(inversions(&[1, 0, 0, 1, 2]), 2);
        assert_eq!(inversions(&[1, 0, 0, 2, 0]), 4);
        assert_eq!(inversions(&[1, 0, 0, 2, 1]), 3);
        assert_eq!(inversions(&[1, 0, 0, 2, 2]), 2);
        assert_eq!(inversions(&[1, 0, 0, 2, 3]), 2);
        assert_eq!(inversions(&[1, 0, 0, 3, 2]), 3);
        assert_eq!(inversions(&[1, 0, 1, 0, 0]), 5);
        assert_eq!(inversions(&[1, 0, 1, 0, 1]), 3);
        assert_eq!(inversions(&[1, 0, 1, 0, 2]), 3);
        assert_eq!(inversions(&[1, 0, 1, 1, 0]), 4);
        assert_eq!(inversions(&[1, 0, 1, 1, 1]), 1);
        assert_eq!(inversions(&[1, 0, 1, 1, 2]), 1);
        assert_eq!(inversions(&[1, 0, 1, 2, 0]), 4);
        assert_eq!(inversions(&[1, 0, 1, 2, 1]), 2);
        assert_eq!(inversions(&[1, 0, 1, 2, 2]), 1);
        assert_eq!(inversions(&[1, 0, 1, 2, 3]), 1);
        assert_eq!(inversions(&[1, 0, 1, 3, 2]), 2);
        assert_eq!(inversions(&[1, 0, 2, 0, 0]), 5);
        assert_eq!(inversions(&[1, 0, 2, 0, 1]), 4);
        assert_eq!(inversions(&[1, 0, 2, 0, 2]), 3);
        assert_eq!(inversions(&[1, 0, 2, 0, 3]), 3);
        assert_eq!(inversions(&[1, 0, 2, 1, 0]), 5);
        assert_eq!(inversions(&[1, 0, 2, 1, 1]), 3);
        assert_eq!(inversions(&[1, 0, 2, 1, 2]), 2);
        assert_eq!(inversions(&[1, 0, 2, 1, 3]), 2);
        assert_eq!(inversions(&[1, 0, 2, 2, 0]), 4);
        assert_eq!(inversions(&[1, 0, 2, 2, 1]), 3);
        assert_eq!(inversions(&[1, 0, 2, 2, 2]), 1);
        assert_eq!(inversions(&[1, 0, 2, 2, 3]), 1);
        assert_eq!(inversions(&[1, 0, 2, 3, 0]), 4);
        assert_eq!(inversions(&[1, 0, 2, 3, 1]), 3);
        assert_eq!(inversions(&[1, 0, 2, 3, 2]), 2);
        assert_eq!(inversions(&[1, 0, 2, 3, 3]), 1);
        assert_eq!(inversions(&[1, 0, 2, 3, 4]), 1);
        assert_eq!(inversions(&[1, 0, 2, 4, 3]), 2);
        assert_eq!(inversions(&[1, 0, 3, 0, 2]), 4);
        assert_eq!(inversions(&[1, 0, 3, 1, 2]), 3);
        assert_eq!(inversions(&[1, 0, 3, 2, 0]), 5);
        assert_eq!(inversions(&[1, 0, 3, 2, 1]), 4);
        assert_eq!(inversions(&[1, 0, 3, 2, 2]), 3);
        assert_eq!(inversions(&[1, 0, 3, 2, 3]), 2);
        assert_eq!(inversions(&[1, 0, 3, 2, 4]), 2);
        assert_eq!(inversions(&[1, 0, 3, 3, 2]), 3);
        assert_eq!(inversions(&[1, 0, 3, 4, 2]), 3);
        assert_eq!(inversions(&[1, 0, 4, 2, 3]), 3);
        assert_eq!(inversions(&[1, 0, 4, 3, 2]), 4);
        assert_eq!(inversions(&[1, 1, 0, 0, 0]), 6);
        assert_eq!(inversions(&[1, 1, 0, 0, 1]), 4);
        assert_eq!(inversions(&[1, 1, 0, 0, 2]), 4);
        assert_eq!(inversions(&[1, 1, 0, 1, 0]), 5);
        assert_eq!(inversions(&[1, 1, 0, 1, 1]), 2);
        assert_eq!(inversions(&[1, 1, 0, 1, 2]), 2);
        assert_eq!(inversions(&[1, 1, 0, 2, 0]), 5);
        assert_eq!(inversions(&[1, 1, 0, 2, 1]), 3);
        assert_eq!(inversions(&[1, 1, 0, 2, 2]), 2);
        assert_eq!(inversions(&[1, 1, 0, 2, 3]), 2);
        assert_eq!(inversions(&[1, 1, 0, 3, 2]), 3);
        assert_eq!(inversions(&[1, 1, 1, 0, 0]), 6);
        assert_eq!(inversions(&[1, 1, 1, 0, 1]), 3);
        assert_eq!(inversions(&[1, 1, 1, 0, 2]), 3);
        assert_eq!(inversions(&[1, 1, 1, 1, 0]), 4);
        assert_eq!(inversions(&[1, 1, 1, 2, 0]), 4);
        assert_eq!(inversions(&[1, 1, 2, 0, 0]), 6);
        assert_eq!(inversions(&[1, 1, 2, 0, 1]), 4);
        assert_eq!(inversions(&[1, 1, 2, 0, 2]), 3);
        assert_eq!(inversions(&[1, 1, 2, 0, 3]), 3);
        assert_eq!(inversions(&[1, 1, 2, 1, 0]), 5);
        assert_eq!(inversions(&[1, 1, 2, 2, 0]), 4);
        assert_eq!(inversions(&[1, 1, 2, 3, 0]), 4);
        assert_eq!(inversions(&[1, 1, 3, 0, 2]), 4);
        assert_eq!(inversions(&[1, 1, 3, 2, 0]), 5);
        assert_eq!(inversions(&[1, 2, 0, 0, 0]), 6);
        assert_eq!(inversions(&[1, 2, 0, 0, 1]), 5);
        assert_eq!(inversions(&[1, 2, 0, 0, 2]), 4);
        assert_eq!(inversions(&[1, 2, 0, 0, 3]), 4);
        assert_eq!(inversions(&[1, 2, 0, 1, 0]), 6);
        assert_eq!(inversions(&[1, 2, 0, 1, 1]), 4);
        assert_eq!(inversions(&[1, 2, 0, 1, 2]), 3);
        assert_eq!(inversions(&[1, 2, 0, 1, 3]), 3);
        assert_eq!(inversions(&[1, 2, 0, 2, 0]), 5);
        assert_eq!(inversions(&[1, 2, 0, 2, 1]), 4);
        assert_eq!(inversions(&[1, 2, 0, 2, 2]), 2);
        assert_eq!(inversions(&[1, 2, 0, 2, 3]), 2);
        assert_eq!(inversions(&[1, 2, 0, 3, 0]), 5);
        assert_eq!(inversions(&[1, 2, 0, 3, 1]), 4);
        assert_eq!(inversions(&[1, 2, 0, 3, 2]), 3);
        assert_eq!(inversions(&[1, 2, 0, 3, 3]), 2);
        assert_eq!(inversions(&[1, 2, 0, 3, 4]), 2);
        assert_eq!(inversions(&[1, 2, 0, 4, 3]), 3);
        assert_eq!(inversions(&[1, 2, 1, 0, 0]), 7);
        assert_eq!(inversions(&[1, 2, 1, 0, 1]), 5);
        assert_eq!(inversions(&[1, 2, 1, 0, 2]), 4);
        assert_eq!(inversions(&[1, 2, 1, 0, 3]), 4);
        assert_eq!(inversions(&[1, 2, 1, 1, 0]), 6);
        assert_eq!(inversions(&[1, 2, 1, 2, 0]), 5);
        assert_eq!(inversions(&[1, 2, 1, 3, 0]), 5);
        assert_eq!(inversions(&[1, 2, 2, 0, 0]), 6);
        assert_eq!(inversions(&[1, 2, 2, 0, 1]), 5);
        assert_eq!(inversions(&[1, 2, 2, 0, 2]), 3);
        assert_eq!(inversions(&[1, 2, 2, 0, 3]), 3);
        assert_eq!(inversions(&[1, 2, 2, 1, 0]), 6);
        assert_eq!(inversions(&[1, 2, 2, 2, 0]), 4);
        assert_eq!(inversions(&[1, 2, 2, 3, 0]), 4);
        assert_eq!(inversions(&[1, 2, 3, 0, 0]), 6);
        assert_eq!(inversions(&[1, 2, 3, 0, 1]), 5);
        assert_eq!(inversions(&[1, 2, 3, 0, 2]), 4);
        assert_eq!(inversions(&[1, 2, 3, 0, 3]), 3);
        assert_eq!(inversions(&[1, 2, 3, 0, 4]), 3);
        assert_eq!(inversions(&[1, 2, 3, 1, 0]), 6);
        assert_eq!(inversions(&[1, 2, 3, 2, 0]), 5);
        assert_eq!(inversions(&[1, 2, 3, 3, 0]), 4);
        assert_eq!(inversions(&[1, 2, 3, 4, 0]), 4);
        assert_eq!(inversions(&[1, 2, 4, 0, 3]), 4);
        assert_eq!(inversions(&[1, 2, 4, 3, 0]), 5);
        assert_eq!(inversions(&[1, 3, 0, 0, 2]), 5);
        assert_eq!(inversions(&[1, 3, 0, 1, 2]), 4);
        assert_eq!(inversions(&[1, 3, 0, 2, 0]), 6);
        assert_eq!(inversions(&[1, 3, 0, 2, 1]), 5);
        assert_eq!(inversions(&[1, 3, 0, 2, 2]), 4);
        assert_eq!(inversions(&[1, 3, 0, 2, 3]), 3);
        assert_eq!(inversions(&[1, 3, 0, 2, 4]), 3);
        assert_eq!(inversions(&[1, 3, 0, 3, 2]), 4);
        assert_eq!(inversions(&[1, 3, 0, 4, 2]), 4);
        assert_eq!(inversions(&[1, 3, 1, 0, 2]), 5);
        assert_eq!(inversions(&[1, 3, 1, 2, 0]), 6);
        assert_eq!(inversions(&[1, 3, 2, 0, 0]), 7);
        assert_eq!(inversions(&[1, 3, 2, 0, 1]), 6);
        assert_eq!(inversions(&[1, 3, 2, 0, 2]), 5);
        assert_eq!(inversions(&[1, 3, 2, 0, 3]), 4);
        assert_eq!(inversions(&[1, 3, 2, 0, 4]), 4);
        assert_eq!(inversions(&[1, 3, 2, 1, 0]), 7);
        assert_eq!(inversions(&[1, 3, 2, 2, 0]), 6);
        assert_eq!(inversions(&[1, 3, 2, 3, 0]), 5);
        assert_eq!(inversions(&[1, 3, 2, 4, 0]), 5);
        assert_eq!(inversions(&[1, 3, 3, 0, 2]), 5);
        assert_eq!(inversions(&[1, 3, 3, 2, 0]), 6);
        assert_eq!(inversions(&[1, 3, 4, 0, 2]), 5);
        assert_eq!(inversions(&[1, 3, 4, 2, 0]), 6);
        assert_eq!(inversions(&[1, 4, 0, 2, 3]), 4);
        assert_eq!(inversions(&[1, 4, 0, 3, 2]), 5);
        assert_eq!(inversions(&[1, 4, 2, 0, 3]), 5);
        assert_eq!(inversions(&[1, 4, 2, 3, 0]), 6);
        assert_eq!(inversions(&[1, 4, 3, 0, 2]), 6);
        assert_eq!(inversions(&[1, 4, 3, 2, 0]), 7);
        assert_eq!(inversions(&[2, 0, 0, 0, 1]), 4);
        assert_eq!(inversions(&[2, 0, 0, 1, 0]), 5);
        assert_eq!(inversions(&[2, 0, 0, 1, 1]), 4);
        assert_eq!(inversions(&[2, 0, 0, 1, 2]), 3);
        assert_eq!(inversions(&[2, 0, 0, 1, 3]), 3);
        assert_eq!(inversions(&[2, 0, 0, 2, 1]), 4);
        assert_eq!(inversions(&[2, 0, 0, 3, 1]), 4);
        assert_eq!(inversions(&[2, 0, 1, 0, 0]), 6);
        assert_eq!(inversions(&[2, 0, 1, 0, 1]), 5);
        assert_eq!(inversions(&[2, 0, 1, 0, 2]), 4);
        assert_eq!(inversions(&[2, 0, 1, 0, 3]), 4);
        assert_eq!(inversions(&[2, 0, 1, 1, 0]), 6);
        assert_eq!(inversions(&[2, 0, 1, 1, 1]), 4);
        assert_eq!(inversions(&[2, 0, 1, 1, 2]), 3);
        assert_eq!(inversions(&[2, 0, 1, 1, 3]), 3);
        assert_eq!(inversions(&[2, 0, 1, 2, 0]), 5);
        assert_eq!(inversions(&[2, 0, 1, 2, 1]), 4);
        assert_eq!(inversions(&[2, 0, 1, 2, 2]), 2);
        assert_eq!(inversions(&[2, 0, 1, 2, 3]), 2);
        assert_eq!(inversions(&[2, 0, 1, 3, 0]), 5);
        assert_eq!(inversions(&[2, 0, 1, 3, 1]), 4);
        assert_eq!(inversions(&[2, 0, 1, 3, 2]), 3);
        assert_eq!(inversions(&[2, 0, 1, 3, 3]), 2);
        assert_eq!(inversions(&[2, 0, 1, 3, 4]), 2);
        assert_eq!(inversions(&[2, 0, 1, 4, 3]), 3);
        assert_eq!(inversions(&[2, 0, 2, 0, 1]), 5);
        assert_eq!(inversions(&[2, 0, 2, 1, 0]), 6);
        assert_eq!(inversions(&[2, 0, 2, 1, 1]), 5);
        assert_eq!(inversions(&[2, 0, 2, 1, 2]), 3);
        assert_eq!(inversions(&[2, 0, 2, 1, 3]), 3);
        assert_eq!(inversions(&[2, 0, 2, 2, 1]), 4);
        assert_eq!(inversions(&[2, 0, 2, 3, 1]), 4);
        assert_eq!(inversions(&[2, 0, 3, 0, 1]), 5);
        assert_eq!(inversions(&[2, 0, 3, 1, 0]), 6);
        assert_eq!(inversions(&[2, 0, 3, 1, 1]), 5);
        assert_eq!(inversions(&[2, 0, 3, 1, 2]), 4);
        assert_eq!(inversions(&[2, 0, 3, 1, 3]), 3);
        assert_eq!(inversions(&[2, 0, 3, 1, 4]), 3);
        assert_eq!(inversions(&[2, 0, 3, 2, 1]), 5);
        assert_eq!(inversions(&[2, 0, 3, 3, 1]), 4);
        assert_eq!(inversions(&[2, 0, 3, 4, 1]), 4);
        assert_eq!(inversions(&[2, 0, 4, 1, 3]), 4);
        assert_eq!(inversions(&[2, 0, 4, 3, 1]), 5);
        assert_eq!(inversions(&[2, 1, 0, 0, 0]), 7);
        assert_eq!(inversions(&[2, 1, 0, 0, 1]), 6);
        assert_eq!(inversions(&[2, 1, 0, 0, 2]), 5);
        assert_eq!(inversions(&[2, 1, 0, 0, 3]), 5);
        assert_eq!(inversions(&[2, 1, 0, 1, 0]), 7);
        assert_eq!(inversions(&[2, 1, 0, 1, 1]), 5);
        assert_eq!(inversions(&[2, 1, 0, 1, 2]), 4);
        assert_eq!(inversions(&[2, 1, 0, 1, 3]), 4);
        assert_eq!(inversions(&[2, 1, 0, 2, 0]), 6);
        assert_eq!(inversions(&[2, 1, 0, 2, 1]), 5);
        assert_eq!(inversions(&[2, 1, 0, 2, 2]), 3);
        assert_eq!(inversions(&[2, 1, 0, 2, 3]), 3);
        assert_eq!(inversions(&[2, 1, 0, 3, 0]), 6);
        assert_eq!(inversions(&[2, 1, 0, 3, 1]), 5);
        assert_eq!(inversions(&[2, 1, 0, 3, 2]), 4);
        assert_eq!(inversions(&[2, 1, 0, 3, 3]), 3);
        assert_eq!(inversions(&[2, 1, 0, 3, 4]), 3);
        assert_eq!(inversions(&[2, 1, 0, 4, 3]), 4);
        assert_eq!(inversions(&[2, 1, 1, 0, 0]), 8);
        assert_eq!(inversions(&[2, 1, 1, 0, 1]), 6);
        assert_eq!(inversions(&[2, 1, 1, 0, 2]), 5);
        assert_eq!(inversions(&[2, 1, 1, 0, 3]), 5);
        assert_eq!(inversions(&[2, 1, 1, 1, 0]), 7);
        assert_eq!(inversions(&[2, 1, 1, 2, 0]), 6);
        assert_eq!(inversions(&[2, 1, 1, 3, 0]), 6);
        assert_eq!(inversions(&[2, 1, 2, 0, 0]), 7);
        assert_eq!(inversions(&[2, 1, 2, 0, 1]), 6);
        assert_eq!(inversions(&[2, 1, 2, 0, 2]), 4);
        assert_eq!(inversions(&[2, 1, 2, 0, 3]), 4);
        assert_eq!(inversions(&[2, 1, 2, 1, 0]), 7);
        assert_eq!(inversions(&[2, 1, 2, 2, 0]), 5);
        assert_eq!(inversions(&[2, 1, 2, 3, 0]), 5);
        assert_eq!(inversions(&[2, 1, 3, 0, 0]), 7);
        assert_eq!(inversions(&[2, 1, 3, 0, 1]), 6);
        assert_eq!(inversions(&[2, 1, 3, 0, 2]), 5);
        assert_eq!(inversions(&[2, 1, 3, 0, 3]), 4);
        assert_eq!(inversions(&[2, 1, 3, 0, 4]), 4);
        assert_eq!(inversions(&[2, 1, 3, 1, 0]), 7);
        assert_eq!(inversions(&[2, 1, 3, 2, 0]), 6);
        assert_eq!(inversions(&[2, 1, 3, 3, 0]), 5);
        assert_eq!(inversions(&[2, 1, 3, 4, 0]), 5);
        assert_eq!(inversions(&[2, 1, 4, 0, 3]), 5);
        assert_eq!(inversions(&[2, 1, 4, 3, 0]), 6);
        assert_eq!(inversions(&[2, 2, 0, 0, 1]), 6);
        assert_eq!(inversions(&[2, 2, 0, 1, 0]), 7);
        assert_eq!(inversions(&[2, 2, 0, 1, 1]), 6);
        assert_eq!(inversions(&[2, 2, 0, 1, 2]), 4);
        assert_eq!(inversions(&[2, 2, 0, 1, 3]), 4);
        assert_eq!(inversions(&[2, 2, 0, 2, 1]), 5);
        assert_eq!(inversions(&[2, 2, 0, 3, 1]), 5);
        assert_eq!(inversions(&[2, 2, 1, 0, 0]), 8);
        assert_eq!(inversions(&[2, 2, 1, 0, 1]), 7);
        assert_eq!(inversions(&[2, 2, 1, 0, 2]), 5);
        assert_eq!(inversions(&[2, 2, 1, 0, 3]), 5);
        assert_eq!(inversions(&[2, 2, 1, 1, 0]), 8);
        assert_eq!(inversions(&[2, 2, 1, 2, 0]), 6);
        assert_eq!(inversions(&[2, 2, 1, 3, 0]), 6);
        assert_eq!(inversions(&[2, 2, 2, 0, 1]), 6);
        assert_eq!(inversions(&[2, 2, 2, 1, 0]), 7);
        assert_eq!(inversions(&[2, 2, 3, 0, 1]), 6);
        assert_eq!(inversions(&[2, 2, 3, 1, 0]), 7);
        assert_eq!(inversions(&[2, 3, 0, 0, 1]), 6);
        assert_eq!(inversions(&[2, 3, 0, 1, 0]), 7);
        assert_eq!(inversions(&[2, 3, 0, 1, 1]), 6);
        assert_eq!(inversions(&[2, 3, 0, 1, 2]), 5);
        assert_eq!(inversions(&[2, 3, 0, 1, 3]), 4);
        assert_eq!(inversions(&[2, 3, 0, 1, 4]), 4);
        assert_eq!(inversions(&[2, 3, 0, 2, 1]), 6);
        assert_eq!(inversions(&[2, 3, 0, 3, 1]), 5);
        assert_eq!(inversions(&[2, 3, 0, 4, 1]), 5);
        assert_eq!(inversions(&[2, 3, 1, 0, 0]), 8);
        assert_eq!(inversions(&[2, 3, 1, 0, 1]), 7);
        assert_eq!(inversions(&[2, 3, 1, 0, 2]), 6);
        assert_eq!(inversions(&[2, 3, 1, 0, 3]), 5);
        assert_eq!(inversions(&[2, 3, 1, 0, 4]), 5);
        assert_eq!(inversions(&[2, 3, 1, 1, 0]), 8);
        assert_eq!(inversions(&[2, 3, 1, 2, 0]), 7);
        assert_eq!(inversions(&[2, 3, 1, 3, 0]), 6);
        assert_eq!(inversions(&[2, 3, 1, 4, 0]), 6);
        assert_eq!(inversions(&[2, 3, 2, 0, 1]), 7);
        assert_eq!(inversions(&[2, 3, 2, 1, 0]), 8);
        assert_eq!(inversions(&[2, 3, 3, 0, 1]), 6);
        assert_eq!(inversions(&[2, 3, 3, 1, 0]), 7);
        assert_eq!(inversions(&[2, 3, 4, 0, 1]), 6);
        assert_eq!(inversions(&[2, 3, 4, 1, 0]), 7);
        assert_eq!(inversions(&[2, 4, 0, 1, 3]), 5);
        assert_eq!(inversions(&[2, 4, 0, 3, 1]), 6);
        assert_eq!(inversions(&[2, 4, 1, 0, 3]), 6);
        assert_eq!(inversions(&[2, 4, 1, 3, 0]), 7);
        assert_eq!(inversions(&[2, 4, 3, 0, 1]), 7);
        assert_eq!(inversions(&[2, 4, 3, 1, 0]), 8);
        assert_eq!(inversions(&[3, 0, 0, 1, 2]), 4);
        assert_eq!(inversions(&[3, 0, 0, 2, 1]), 5);
        assert_eq!(inversions(&[3, 0, 1, 0, 2]), 5);
        assert_eq!(inversions(&[3, 0, 1, 1, 2]), 4);
        assert_eq!(inversions(&[3, 0, 1, 2, 0]), 6);
        assert_eq!(inversions(&[3, 0, 1, 2, 1]), 5);
        assert_eq!(inversions(&[3, 0, 1, 2, 2]), 4);
        assert_eq!(inversions(&[3, 0, 1, 2, 3]), 3);
        assert_eq!(inversions(&[3, 0, 1, 2, 4]), 3);
        assert_eq!(inversions(&[3, 0, 1, 3, 2]), 4);
        assert_eq!(inversions(&[3, 0, 1, 4, 2]), 4);
        assert_eq!(inversions(&[3, 0, 2, 0, 1]), 6);
        assert_eq!(inversions(&[3, 0, 2, 1, 0]), 7);
        assert_eq!(inversions(&[3, 0, 2, 1, 1]), 6);
        assert_eq!(inversions(&[3, 0, 2, 1, 2]), 5);
        assert_eq!(inversions(&[3, 0, 2, 1, 3]), 4);
        assert_eq!(inversions(&[3, 0, 2, 1, 4]), 4);
        assert_eq!(inversions(&[3, 0, 2, 2, 1]), 6);
        assert_eq!(inversions(&[3, 0, 2, 3, 1]), 5);
        assert_eq!(inversions(&[3, 0, 2, 4, 1]), 5);
        assert_eq!(inversions(&[3, 0, 3, 1, 2]), 5);
        assert_eq!(inversions(&[3, 0, 3, 2, 1]), 6);
        assert_eq!(inversions(&[3, 0, 4, 1, 2]), 5);
        assert_eq!(inversions(&[3, 0, 4, 2, 1]), 6);
        assert_eq!(inversions(&[3, 1, 0, 0, 2]), 6);
        assert_eq!(inversions(&[3, 1, 0, 1, 2]), 5);
        assert_eq!(inversions(&[3, 1, 0, 2, 0]), 7);
        assert_eq!(inversions(&[3, 1, 0, 2, 1]), 6);
        assert_eq!(inversions(&[3, 1, 0, 2, 2]), 5);
        assert_eq!(inversions(&[3, 1, 0, 2, 3]), 4);
        assert_eq!(inversions(&[3, 1, 0, 2, 4]), 4);
        assert_eq!(inversions(&[3, 1, 0, 3, 2]), 5);
        assert_eq!(inversions(&[3, 1, 0, 4, 2]), 5);
        assert_eq!(inversions(&[3, 1, 1, 0, 2]), 6);
        assert_eq!(inversions(&[3, 1, 1, 2, 0]), 7);
        assert_eq!(inversions(&[3, 1, 2, 0, 0]), 8);
        assert_eq!(inversions(&[3, 1, 2, 0, 1]), 7);
        assert_eq!(inversions(&[3, 1, 2, 0, 2]), 6);
        assert_eq!(inversions(&[3, 1, 2, 0, 3]), 5);
        assert_eq!(inversions(&[3, 1, 2, 0, 4]), 5);
        assert_eq!(inversions(&[3, 1, 2, 1, 0]), 8);
        assert_eq!(inversions(&[3, 1, 2, 2, 0]), 7);
        assert_eq!(inversions(&[3, 1, 2, 3, 0]), 6);
        assert_eq!(inversions(&[3, 1, 2, 4, 0]), 6);
        assert_eq!(inversions(&[3, 1, 3, 0, 2]), 6);
        assert_eq!(inversions(&[3, 1, 3, 2, 0]), 7);
        assert_eq!(inversions(&[3, 1, 4, 0, 2]), 6);
        assert_eq!(inversions(&[3, 1, 4, 2, 0]), 7);
        assert_eq!(inversions(&[3, 2, 0, 0, 1]), 7);
        assert_eq!(inversions(&[3, 2, 0, 1, 0]), 8);
        assert_eq!(inversions(&[3, 2, 0, 1, 1]), 7);
        assert_eq!(inversions(&[3, 2, 0, 1, 2]), 6);
        assert_eq!(inversions(&[3, 2, 0, 1, 3]), 5);
        assert_eq!(inversions(&[3, 2, 0, 1, 4]), 5);
        assert_eq!(inversions(&[3, 2, 0, 2, 1]), 7);
        assert_eq!(inversions(&[3, 2, 0, 3, 1]), 6);
        assert_eq!(inversions(&[3, 2, 0, 4, 1]), 6);
        assert_eq!(inversions(&[3, 2, 1, 0, 0]), 9);
        assert_eq!(inversions(&[3, 2, 1, 0, 1]), 8);
        assert_eq!(inversions(&[3, 2, 1, 0, 2]), 7);
        assert_eq!(inversions(&[3, 2, 1, 0, 3]), 6);
        assert_eq!(inversions(&[3, 2, 1, 0, 4]), 6);
        assert_eq!(inversions(&[3, 2, 1, 1, 0]), 9);
        assert_eq!(inversions(&[3, 2, 1, 2, 0]), 8);
        assert_eq!(inversions(&[3, 2, 1, 3, 0]), 7);
        assert_eq!(inversions(&[3, 2, 1, 4, 0]), 7);
        assert_eq!(inversions(&[3, 2, 2, 0, 1]), 8);
        assert_eq!(inversions(&[3, 2, 2, 1, 0]), 9);
        assert_eq!(inversions(&[3, 2, 3, 0, 1]), 7);
        assert_eq!(inversions(&[3, 2, 3, 1, 0]), 8);
        assert_eq!(inversions(&[3, 2, 4, 0, 1]), 7);
        assert_eq!(inversions(&[3, 2, 4, 1, 0]), 8);
        assert_eq!(inversions(&[3, 3, 0, 1, 2]), 6);
        assert_eq!(inversions(&[3, 3, 0, 2, 1]), 7);
        assert_eq!(inversions(&[3, 3, 1, 0, 2]), 7);
        assert_eq!(inversions(&[3, 3, 1, 2, 0]), 8);
        assert_eq!(inversions(&[3, 3, 2, 0, 1]), 8);
        assert_eq!(inversions(&[3, 3, 2, 1, 0]), 9);
        assert_eq!(inversions(&[3, 4, 0, 1, 2]), 6);
        assert_eq!(inversions(&[3, 4, 0, 2, 1]), 7);
        assert_eq!(inversions(&[3, 4, 1, 0, 2]), 7);
        assert_eq!(inversions(&[3, 4, 1, 2, 0]), 8);
        assert_eq!(inversions(&[3, 4, 2, 0, 1]), 8);
        assert_eq!(inversions(&[3, 4, 2, 1, 0]), 9);
        assert_eq!(inversions(&[4, 0, 1, 2, 3]), 4);
        assert_eq!(inversions(&[4, 0, 1, 3, 2]), 5);
        assert_eq!(inversions(&[4, 0, 2, 1, 3]), 5);
        assert_eq!(inversions(&[4, 0, 2, 3, 1]), 6);
        assert_eq!(inversions(&[4, 0, 3, 1, 2]), 6);
        assert_eq!(inversions(&[4, 0, 3, 2, 1]), 7);
        assert_eq!(inversions(&[4, 1, 0, 2, 3]), 5);
        assert_eq!(inversions(&[4, 1, 0, 3, 2]), 6);
        assert_eq!(inversions(&[4, 1, 2, 0, 3]), 6);
        assert_eq!(inversions(&[4, 1, 2, 3, 0]), 7);
        assert_eq!(inversions(&[4, 1, 3, 0, 2]), 7);
        assert_eq!(inversions(&[4, 1, 3, 2, 0]), 8);
        assert_eq!(inversions(&[4, 2, 0, 1, 3]), 6);
        assert_eq!(inversions(&[4, 2, 0, 3, 1]), 7);
        assert_eq!(inversions(&[4, 2, 1, 0, 3]), 7);
        assert_eq!(inversions(&[4, 2, 1, 3, 0]), 8);
        assert_eq!(inversions(&[4, 2, 3, 0, 1]), 8);
        assert_eq!(inversions(&[4, 2, 3, 1, 0]), 9);
        assert_eq!(inversions(&[4, 3, 0, 1, 2]), 7);
        assert_eq!(inversions(&[4, 3, 0, 2, 1]), 8);
        assert_eq!(inversions(&[4, 3, 1, 0, 2]), 8);
        assert_eq!(inversions(&[4, 3, 1, 2, 0]), 9);
        assert_eq!(inversions(&[4, 3, 2, 0, 1]), 9);
        assert_eq!(inversions(&[4, 3, 2, 1, 0]), 10);
    }
}
